<div id="cwcs">
  <style>
      #cwcs ul {
        margin-left: 1rem;
      }

    #cwcs .code-block {
      border-radius: 0;
      margin: 0;
      padding 1rem;
    }

    .cntr {
      border: 1px solid #ced4da;
      padding: 2rem;
    }
    .cont {
      background-color: #fff;
      border: 1px solid #ced4da;
      display: block;
      height: 60px;
      width: 120px;
    }
    .expl {
      border: 1px solid #0d6efd;
      padding: 2rem;
    }

    .label-overlay {
      position: relative;
    }
    .label-cntr {
      background-color: #fff;
      color: #6c757d;
      left: 0.5rem;
      padding: 0 0.25rem;
      position: absolute;
      top: calc(-1rem + 1px);
    }
    .label-expl {
      background-color: #fff;
      color: #0d6efd;
      left: calc(2.5rem + 1px);
      padding: 0 0.25rem;
      position: absolute;
      top: calc(1rem + 2px);
    }
    .label-cont {
      background-color: #fff;
      color: #6c757d;
      left: calc(4.5rem + 2px);
      padding: 0 0.25rem;
      position: absolute;
      top: calc(3rem + 3px);
    }

    #cwcs .code-row {
      display: grid;
      grid-gap: 1rem;
      grid-template-columns: 1fr 1fr;
      width: 600px;
    }
  </style>
  <p>
    In CSS, I&#x27;m often confused about when an element expands to the width
    of its container and when it adjusts to the width of its content. I made
    some experiments to test the CSS behavior in various conditions. The script
    to generate the experiments is
    <a href="https://github.com/saltycrane/css-width-cheat-sheet">on github</a>
    and the results are shown below. See also the
    <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/display"
      >MDN documentation on display</a
    >
    and the
    <a href="https://www.w3.org/TR/css-display-3/#the-display-properties"
      >CSS specification on display</a
    >.
  </p>
  <div>
    By default, elements expand to the <b>width of their container</b> when they
    are
  </div>
  <ul>
    <li><a href="#101">block elements in block containers</a></li>
    <li>elements in <a href="#102">flex column containers</a></li>
    <li>elements in <a href="#103">grid containers</a></li>
  </ul>
  <div>
    By default, elements adjust to <b>width of their content</b> when they are
  </div>
  <ul>
    <li><a href="#201">inline elements in block containers</a></li>
    <li>elements in <a href="#202">flex row containers</a></li>
  </ul>
  <div>
    Some elements can be made to expand to the
    <b>width of their container</b> by
  </div>
  <ul>
    <li>
      <a href="#104">setting their width</a> <a href="#105">to 100%</a> (tip: if
      there are intermediate elements, their width may need to be set to 100%
      also)
    </li>
    <li>
      <a href="#106">setting <code>flex-grow</code></a> for flex row containers
    </li>
  </ul>
  <div>
    Some elements can be made to adjust to the <b>width of their content</b> by
  </div>
  <ul>
    <li>
      <a href="#203">using <code>fit-content</code></a> (not supported by IE)
    </li>
    <li>
      <a href="#204">setting <code>justify-items</code></a>
      <a href="#205">or <code>justify-self</code></a> to something other than
      <code>stretch</code> for elements in grid containers
    </li>
  </ul>
  <h4 id="by-container">Examples - width determined by container</h4>
  <div>
    <div>
      <b id="101">Block elements, auto width</b> - block elements expand to the
      width of their container by default
    </div>
    <div style="height: 1.5rem;"></div>
    <div class="label-overlay">
      <style>
        #container-101 {
          display: block; /* default */
          width: 600px;
        }
        #example-101 {
          display: block; /* default */
          width: auto; /* default */
        }
      </style>
      <div class="cntr" id="container-101">
        <div class="expl" id="example-101"><div class="cont"></div></div>
      </div>
      <div class="label-cntr">#container-101</div>
      <div class="label-expl">#example-101</div>
      <div class="label-cont">content</div>
    </div>
    <div style="height: 1rem;"></div>
    <div class="code-row">
      <pre class="code-block">
#container-101 {
  display: block;  /* default */
  width: 600px;
}</pre
      >
      <pre class="code-block">
#example-101 {
  display: block;  /* default */
  width: auto;     /* default */
}</pre
      >
    </div>
    <div style="height: 3rem;"></div>
  </div>
  <div>
    <div>
      <b id="102">Flex column container</b> - if the container is a flex column,
      then elements will expand to the width of the container by default
    </div>
    <div style="height: 1.5rem;"></div>
    <div class="label-overlay">
      <style>
        #container-102 {
          display: flex;
          flex-direction: column;
          width: 600px;
        }
        #example-102 {
          display: block; /* default */
        }
      </style>
      <div class="cntr" id="container-102">
        <div class="expl" id="example-102"><div class="cont"></div></div>
      </div>
      <div class="label-cntr">#container-102</div>
      <div class="label-expl">#example-102</div>
      <div class="label-cont">content</div>
    </div>
    <div style="height: 1rem;"></div>
    <div class="code-row">
      <pre class="code-block">
#container-102 {
  display: flex;
  flex-direction: column;
  width: 600px;
}</pre
      >
      <pre class="code-block">
#example-102 {
  display: block;  /* default */
}</pre
      >
    </div>
    <div style="height: 3rem;"></div>
  </div>
  <div>
    <div>
      <b id="103">Grid container</b> - elements will expand to the width of a
      grid container by default
    </div>
    <div style="height: 1.5rem;"></div>
    <div class="label-overlay">
      <style>
        #container-103 {
          display: grid;
          justify-items: stretch; /* default */
          width: 600px;
        }
        #example-103 {
          display: block; /* default */
        }
      </style>
      <div class="cntr" id="container-103">
        <div class="expl" id="example-103"><div class="cont"></div></div>
      </div>
      <div class="label-cntr">#container-103</div>
      <div class="label-expl">#example-103</div>
      <div class="label-cont">content</div>
    </div>
    <div style="height: 1rem;"></div>
    <div class="code-row">
      <pre class="code-block">
#container-103 {
  display: grid;
  justify-items: stretch;  /* default */
  width: 600px;
}</pre
      >
      <pre class="code-block">
#example-103 {
  display: block;  /* default */
}</pre
      >
    </div>
    <div style="height: 3rem;"></div>
  </div>
  <div>
    <div>
      <b id="104">Inline elements, width 100%</b> - inline elements will expand
      to the width of their container if width is set to 100%
    </div>
    <div style="height: 1.5rem;"></div>
    <div class="label-overlay">
      <style>
        #container-104 {
          display: block; /* default */
          width: 600px;
        }
        #example-104 {
          display: inline-block;
          width: 100%;
        }
      </style>
      <div class="cntr" id="container-104">
        <div class="expl" id="example-104"><div class="cont"></div></div>
      </div>
      <div class="label-cntr">#container-104</div>
      <div class="label-expl">#example-104</div>
      <div class="label-cont">content</div>
    </div>
    <div style="height: 1rem;"></div>
    <div class="code-row">
      <pre class="code-block">
#container-104 {
  display: block;  /* default */
  width: 600px;
}</pre
      >
      <pre class="code-block">
#example-104 {
  display: inline-block;
  width: 100%;
}</pre
      >
    </div>
    <div style="height: 3rem;"></div>
  </div>
  <div>
    <div>
      <b id="105">Flex row container, width: 100%</b> - by default, block
      elements in a flex container will not expand to the width of the
      container. Setting <code>width: 100%</code> will cause it to expand.
    </div>
    <div style="height: 1.5rem;"></div>
    <div class="label-overlay">
      <style>
        #container-105 {
          display: flex;
          width: 600px;
        }
        #example-105 {
          display: block; /* default */
          width: 100%;
        }
      </style>
      <div class="cntr" id="container-105">
        <div class="expl" id="example-105"><div class="cont"></div></div>
      </div>
      <div class="label-cntr">#container-105</div>
      <div class="label-expl">#example-105</div>
      <div class="label-cont">content</div>
    </div>
    <div style="height: 1rem;"></div>
    <div class="code-row">
      <pre class="code-block">
#container-105 {
  display: flex;
  width: 600px;
}</pre
      >
      <pre class="code-block">
#example-105 {
  display: block;  /* default */
  width: 100%;
}</pre
      >
    </div>
    <div style="height: 3rem;"></div>
  </div>
  <div>
    <div>
      <b id="106">Flex row container, flex-grow: 1</b> - by default, block
      elements in a flex container will not expand to the width of the
      container. But setting <code>flex-grow: 1</code> will cause it to expand.
    </div>
    <div style="height: 1.5rem;"></div>
    <div class="label-overlay">
      <style>
        #container-106 {
          display: flex;
          width: 600px;
        }
        #example-106 {
          display: block; /* default */
          flex-grow: 1;
        }
      </style>
      <div class="cntr" id="container-106">
        <div class="expl" id="example-106"><div class="cont"></div></div>
      </div>
      <div class="label-cntr">#container-106</div>
      <div class="label-expl">#example-106</div>
      <div class="label-cont">content</div>
    </div>
    <div style="height: 1rem;"></div>
    <div class="code-row">
      <pre class="code-block">
#container-106 {
  display: flex;
  width: 600px;
}</pre
      >
      <pre class="code-block">
#example-106 {
  display: block;  /* default */
  flex-grow: 1;
}</pre
      >
    </div>
    <div style="height: 3rem;"></div>
  </div>
  <h4 id="by-content">Examples - width determined by content</h4>
  <div>
    <div>
      <b id="201">Inline elements</b> - inline elements adjust to the width of
      their content by default
    </div>
    <div style="height: 1.5rem;"></div>
    <div class="label-overlay">
      <style>
        #container-201 {
          display: block; /* default */
          width: 600px;
        }
        #example-201 {
          display: inline-block;
        }
      </style>
      <div class="cntr" id="container-201">
        <div class="expl" id="example-201"><div class="cont"></div></div>
      </div>
      <div class="label-cntr">#container-201</div>
      <div class="label-expl">#example-201</div>
      <div class="label-cont">content</div>
    </div>
    <div style="height: 1rem;"></div>
    <div class="code-row">
      <pre class="code-block">
#container-201 {
  display: block;  /* default */
  width: 600px;
}</pre
      >
      <pre class="code-block">
#example-201 {
  display: inline-block;
}</pre
      >
    </div>
    <div style="height: 3rem;"></div>
  </div>
  <div>
    <div>
      <b id="202">Flex row container</b> - if the container uses
      <code>display: flex</code>, the element will set its width to match its
      content even for block elements.
    </div>
    <div style="height: 1.5rem;"></div>
    <div class="label-overlay">
      <style>
        #container-202 {
          display: flex;
          width: 600px;
        }
        #example-202 {
          display: block; /* default */
        }
      </style>
      <div class="cntr" id="container-202">
        <div class="expl" id="example-202"><div class="cont"></div></div>
      </div>
      <div class="label-cntr">#container-202</div>
      <div class="label-expl">#example-202</div>
      <div class="label-cont">content</div>
    </div>
    <div style="height: 1rem;"></div>
    <div class="code-row">
      <pre class="code-block">
#container-202 {
  display: flex;
  width: 600px;
}</pre
      >
      <pre class="code-block">
#example-202 {
  display: block;  /* default */
}</pre
      >
    </div>
    <div style="height: 3rem;"></div>
  </div>
  <div>
    <div>
      <b id="203">Block elements, using <code>fit-content</code></b> - block
      elements adjust to the width of their container by default but can use
      <code>fit-content</code> to set their width to match that of their
      content. NOTE: <code>fit-content</code> is
      <a href="https://caniuse.com/#feat=mdn-css_properties_width_fit-content"
        >not supported by IE</a
      >.
    </div>
    <div style="height: 1.5rem;"></div>
    <div class="label-overlay">
      <style>
        #container-203 {
          display: block; /* default */
          width: 600px;
        }
        #example-203 {
          display: block; /* default */
          width: fit-content;
        }
      </style>
      <div class="cntr" id="container-203">
        <div class="expl" id="example-203"><div class="cont"></div></div>
      </div>
      <div class="label-cntr">#container-203</div>
      <div class="label-expl">#example-203</div>
      <div class="label-cont">content</div>
    </div>
    <div style="height: 1rem;"></div>
    <div class="code-row">
      <pre class="code-block">
#container-203 {
  display: block;  /* default */
  width: 600px;
}</pre
      >
      <pre class="code-block">
#example-203 {
  display: block;  /* default */
  width: fit-content;
}</pre
      >
    </div>
    <div style="height: 3rem;"></div>
  </div>
  <div>
    <div>
      <b id="204">Grid container, w/ <code>justify-items</code> set</b> - if a
      grid container sets <code>justify-items</code> to something other than
      <code>stretch</code> (the default), then the element will set its width to
      match its content by default
    </div>
    <div style="height: 1.5rem;"></div>
    <div class="label-overlay">
      <style>
        #container-204 {
          display: grid;
          justify-items: start;
          width: 600px;
        }
        #example-204 {
          display: block; /* default */
        }
      </style>
      <div class="cntr" id="container-204">
        <div class="expl" id="example-204"><div class="cont"></div></div>
      </div>
      <div class="label-cntr">#container-204</div>
      <div class="label-expl">#example-204</div>
      <div class="label-cont">content</div>
    </div>
    <div style="height: 1rem;"></div>
    <div class="code-row">
      <pre class="code-block">
#container-204 {
  display: grid;
  justify-items: start;
  width: 600px;
}</pre
      >
      <pre class="code-block">
#example-204 {
  display: block;  /* default */
}</pre
      >
    </div>
    <div style="height: 3rem;"></div>
  </div>
  <div>
    <div>
      <b id="205">Grid container, w/ <code>justify-self</code> set</b> - if an
      element sets <code>justify-self</code> to something other than
      <code>stretch</code> (the default), inside a grid container, it will set
      its width to match its content by default
    </div>
    <div style="height: 1.5rem;"></div>
    <div class="label-overlay">
      <style>
        #container-205 {
          display: grid;
          width: 600px;
        }
        #example-205 {
          display: block; /* default */
          justify-self: start;
        }
      </style>
      <div class="cntr" id="container-205">
        <div class="expl" id="example-205"><div class="cont"></div></div>
      </div>
      <div class="label-cntr">#container-205</div>
      <div class="label-expl">#example-205</div>
      <div class="label-cont">content</div>
    </div>
    <div style="height: 1rem;"></div>
    <div class="code-row">
      <pre class="code-block">
#container-205 {
  display: grid;
  width: 600px;
}</pre
      >
      <pre class="code-block">
#example-205 {
  display: block;  /* default */
  justify-self: start;
}</pre
      >
    </div>
    <div style="height: 3rem;"></div>
  </div>
</div>
